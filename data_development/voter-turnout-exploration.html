<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mary Richards">
<meta name="dcterms.date" content="2025-09-29">

<title>Exploring Voter Turnout</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="voter-turnout-exploration_files/libs/clipboard/clipboard.min.js"></script>
<script src="voter-turnout-exploration_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="voter-turnout-exploration_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="voter-turnout-exploration_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="voter-turnout-exploration_files/libs/quarto-html/popper.min.js"></script>
<script src="voter-turnout-exploration_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="voter-turnout-exploration_files/libs/quarto-html/anchor.min.js"></script>
<link href="voter-turnout-exploration_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="voter-turnout-exploration_files/libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="voter-turnout-exploration_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="voter-turnout-exploration_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="voter-turnout-exploration_files/libs/bootstrap/bootstrap-9e3ffae467580fdb927a41352e75a2e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
  
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Exploring Voter Turnout</h1>
<p class="subtitle lead">Applying geography splits to translate precinct-level data to census tract geographies</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mary Richards </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 29, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>This documents the process for exploring voter turnout based on data from the WA Secretary of State. In this exercise, we are using precinct-tract geography splits to calculate voter turnout by tract geographies.<br>
<br>
The final output is voter turnout (%) by census tract. Ultimately, this measurement will be used in the Equity Tracker and Displacement Risk Mapping projects.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Data</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Methods</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">A) Total population (OFM)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">B) Adult population by tract (ACS 5y-estimates, 2023)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false" href="">C) Adult population by block group (decennial census, 2020)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-6" role="tab" aria-controls="tabset-1-6" aria-selected="false" href="">Conclusions</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<section id="elmer-geography-splits-precinct-tract" class="level2">
<h2 class="anchored" data-anchor-id="elmer-geography-splits-precinct-tract">1.) Elmer geography splits: precinct-tract</h2>
<p>These data tables include the proportion of the population based on OFM (total population) between voting precincts (2024, from SOS) and census tracts (2020). There are three variations: 1) distribution based on total population; 2) distribution based on adult population, based on the 2023 5y ACS tract estimates for adult 18+ population; 3) distribution based on adult population, based on the 2020 decennial census block group estimates for adult 18+ population.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>total_sql24 <span class="ot">&lt;-</span> <span class="st">"select *</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="st">    from stg.get_any_geography_splits(</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="st">        'voter_precinct_2024', --@data_geog_type</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="st">        'tract20',              --@planning_geog_type</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="st">        2024,                   --@ofm_estimate_year</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="st">        2024,                   --@ofm_vintage</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="st">        2018)                   --@parcel_year"</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>adult_sql24 <span class="ot">&lt;-</span> <span class="st">"select *</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="st">    from general.get_any_geography_splits(</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="st">        'voter_precinct_2024', --@data_geog_type</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="st">        'tract20',              --@planning_geog_type</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="st">        2024,                   --@ofm_estimate_year</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="st">        2024,                   --@ofm_vintage</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="st">        2018)                   --@parcel_year"</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>adult_sql24_dec <span class="ot">&lt;-</span> <span class="st">"select *</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="st">    from stg.get_geography_splits_scaled_decennial(</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="st">        'voter_precinct_2024', --@data_geog_type</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="st">        'tract20',              --@planning_geog_type</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="st">        2024,                   --@ofm_estimate_year</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="st">        2024,                   --@ofm_vintage</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="st">        2018)                   --@parcel_year"</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>df24_total <span class="ot">&lt;-</span> <span class="fu">get_query</span>(<span class="at">sql=</span>total_sql24, <span class="at">db_name =</span> <span class="st">"Elmer"</span>)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>df24_adult <span class="ot">&lt;-</span> <span class="fu">get_query</span>(<span class="at">sql=</span>adult_sql24, <span class="at">db_name =</span> <span class="st">"Elmer"</span>)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>df24_adult_dec <span class="ot">&lt;-</span> <span class="fu">get_query</span>(<span class="at">sql=</span>adult_sql24_dec, <span class="at">db_name =</span> <span class="st">"Elmer"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="secretary-of-state-turnout-data" class="level2">
<h2 class="anchored" data-anchor-id="secretary-of-state-turnout-data">2.) Secretary of State: turnout data</h2>
<p>This data set includes the number of registered voters and the number of ballots cast by voting precinct. The voting precinct geographies change between election years.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>voting_url <span class="ot">&lt;-</span><span class="st">"https://www.sos.wa.gov/sites/default/files/"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>turnout_zip_url24 <span class="ot">&lt;-</span> <span class="fu">paste0</span>(voting_url, <span class="st">"2025-01/2024Gen_Precinct_Results_GIS-Ready.zip"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>psrc_counties <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"CountyName"</span><span class="ot">=</span><span class="fu">c</span>(<span class="st">"King"</span>,<span class="st">"Kitsap"</span>,<span class="st">"Pierce"</span>,<span class="st">"Snohomish"</span>),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"FIPS"</span><span class="ot">=</span><span class="fu">c</span>(<span class="st">"033"</span>,<span class="st">"035"</span>,<span class="st">"053"</span>,<span class="st">"061"</span>),</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"CountyCode"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"KI"</span>, <span class="st">"KI"</span>, <span class="st">"PI"</span>, <span class="st">"SN"</span>))</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>acs_year <span class="ot">&lt;-</span> <span class="dv">2023</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Load voter turnout data using new source and column names</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 2024 available through the SOS website</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>vt24 <span class="ot">&lt;-</span> <span class="fu">fetch_turnout</span>(turnout_zip_url24, </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>                      <span class="st">'2024Gen_Precinct_Turnout_GIS-Ready.csv'</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean turnout data sets - filter to PSRC region, rename columns</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>vt24_df <span class="ot">&lt;-</span> vt24 <span class="sc">%&gt;%</span> <span class="fu">setDT</span>() <span class="sc">%&gt;%</span>                                             </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(St_Code, <span class="st">"^KI|KP|PI|SN"</span>)) <span class="sc">%&gt;%</span>               <span class="co"># Filter to PSRC counties</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  .[, .(<span class="at">precinctcode =</span> St_Code, </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">reg_voters =</span> G24TREGVOT, <span class="at">ballots_cast =</span> G24TBALCST)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="acs-5y-2023-population-data" class="level2">
<h2 class="anchored" data-anchor-id="acs-5y-2023-population-data">3.) ACS 5y (2023) population data</h2>
<p>These values will be used as the denominator - dividing the ballots cast by the total population 18+.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>base_acs_data <span class="ot">&lt;-</span> <span class="fu">get_acs_recs</span>(<span class="at">geography =</span><span class="st">'tract'</span>,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">table.names =</span> <span class="st">'S0101'</span>, <span class="co">#subject table code</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">years =</span> <span class="fu">c</span>(<span class="fu">as.numeric</span>(acs_year)),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">acs.type =</span> <span class="st">'acs5'</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>age_18over <span class="ot">&lt;-</span> base_acs_data <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(variable<span class="sc">==</span><span class="st">"S0101_C01_026"</span>) <span class="co">#Total population!!SELECTED AGE CATEGORIES!!18 years and over</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the proportion of 18+ adults/total population to check if there are some tracts with more/fewer adults</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>age_18over_total <span class="ot">&lt;-</span> base_acs_data <span class="sc">%&gt;%</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(variable<span class="sc">==</span><span class="st">"S0101_C01_001"</span> <span class="sc">|</span> <span class="co">#Total population</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>           variable<span class="sc">==</span><span class="st">"S0101_C01_026"</span>) <span class="sc">%&gt;%</span> <span class="co">#Total population!!SELECTED AGE CATEGORIES!!18 years and over</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, variable, estimate) <span class="sc">%&gt;%</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> estimate) <span class="sc">%&gt;%</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reframe</span>(GEOID,</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>          <span class="at">pop_18=</span>S0101_C01_026,</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>          <span class="at">pop_tot=</span>S0101_C01_001,</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>          <span class="at">pop18_total=</span>S0101_C01_026<span class="sc">/</span>S0101_C01_001)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate total number for reference</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(age_18over<span class="sc">$</span>estimate) <span class="co">#3,394,729</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3394729</code></pre>
</div>
</div>
</section>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p><strong>Voter turnout = ballots cast / eligible population</strong><br>
The main challenge is that the raw voting data is available at voting precincts, which are unique geographies that do not align with census geographies. This requires translation between the two geographies.<br>
<br>
There are three approaches we are exploring to calculating the numerator (the number of ballots cast):</p>
<ol type="A">
<li>total population distribution based on OFM</li>
<li>weighting the population distribution by 2023 5y adult 18+ population estimates (TRACT)</li>
<li>weighting the population distribution by 2020 decennial census adult 18+ population estimates (BLOCK GROUP)<br>
</li>
</ol>
<p>For all three approaches, the 2023 5y adult 18+ population estimates are used as the denominator (eligible population).<br>
<br>
<em>DATA NOTE: For this exercise, it is assumed that the eligible population most closely aligns with the adult 18+ population. Although this may include individuals who are not able to legally vote (non-citizens), the alternative is using the number of registered voters (available at voting precincts), which is a subset of the adult 18+ population who are already engaged enough to have registered. While using the general 18+ population as a denominator may result in slightly lower voter turnout values (based on our working definition), using registered voters as the denominator would results in inflated voter turnout values.</em></p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<section id="join-precinct-tract-to-geographies-to-turnout-data" class="level2">
<h2 class="anchored" data-anchor-id="join-precinct-tract-to-geographies-to-turnout-data">Join precinct-tract to geographies to turnout data</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df24_total) <span class="co">#precinct-tract records: 6294</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6294</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(vt24_df) <span class="co">#voting data by unique precinct: 4608</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4608</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>vt24_df_0 <span class="ot">&lt;-</span> vt24_df <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(reg_voters<span class="sc">&lt;</span><span class="dv">1</span>) <span class="co"># there are 62 precincts without data</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># data_geog = precinct</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># planning_geog = tract</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(df24_total<span class="sc">$</span>data_geog)) <span class="co">#unique precincts: 4552</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4552</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(df24_total<span class="sc">$</span>planning_geog)) <span class="co">#unique tracts: 919</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 919</code></pre>
</div>
</div>
<p>There is a difference in the number of records - in the voting data, there are 4,608 records (precincts) while the geography split data only has 4,552 unique precincts. The difference between these two data sets is 56 precincts. There are 62 precincts in the voting data without registered voters.</p>
<section id="checking-the-records-that-dont-line-up-between-the-two-data-sets" class="level3">
<h3 class="anchored" data-anchor-id="checking-the-records-that-dont-line-up-between-the-two-data-sets">checking the records that donâ€™t line up between the two data sets</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>outer <span class="ot">&lt;-</span> df24_total <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(vt24_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'data_geog'</span><span class="ot">=</span><span class="st">'precinctcode'</span>)) </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(outer) <span class="co">#54 records</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 54</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(outer<span class="sc">$</span>percent_of_total_pop)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
0.001275 0.002583 0.010588 0.018519 0.033624 0.066509 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>outer2 <span class="ot">&lt;-</span> vt24_df <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df24_total, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'precinctcode'</span><span class="ot">=</span><span class="st">'data_geog'</span>)) </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(outer2) <span class="co">#57 records</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 57</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(outer2<span class="sc">$</span>percent_of_total_pop)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Length  Class   Mode 
     0   NULL   NULL </code></pre>
</div>
</div>
<p>The output table from the first anti_join() includes census tract IDs without associated precincts.</p>
</section>
</section>
<section id="calculate-total-numbers-for-reference" class="level2">
<h2 class="anchored" data-anchor-id="calculate-total-numbers-for-reference">calculate total numbers for reference</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vt24_df<span class="sc">$</span>reg_voters) <span class="co">#2,736,409</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2736409</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vt24_df<span class="sc">$</span>ballots_cast) <span class="co">#2,166,325</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2166325</code></pre>
</div>
</div>
<p>In the 2024 voting data (by precinct), there were 2,736,409 registered voters and 2,166,325 ballots cast.</p>
</section>
<section id="join-voter-turnout-data-to-precinct-tract-splits-on-precinct-field" class="level2">
<h2 class="anchored" data-anchor-id="join-voter-turnout-data-to-precinct-tract-splits-on-precinct-field">join voter turnout data to precinct-tract splits on precinct field</h2>
<p>Using a full_join()</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>join_df24 <span class="ot">&lt;-</span> df24_total <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(vt24_df, </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'data_geog'</span><span class="ot">=</span><span class="st">'precinctcode'</span>)) <span class="co">#6351 records</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co"># simplify data - remove unnecessary fields</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>join_df24_simp <span class="ot">&lt;-</span> join_df24 <span class="sc">%&gt;%</span> </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(percent_of_group_quarters_pop, </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>            percent_of_household_pop, </span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>            percent_of_housing_units,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>            percent_of_occupied_housing_units))</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co"># review data</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(join_df24_simp<span class="sc">$</span>reg_voters) <span class="co">#54 NAs</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
    0.0   428.0   593.0   620.5   782.0  1727.0      54 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(join_df24_simp<span class="sc">$</span>ballots_cast) <span class="co">#54 NAs</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
    0.0   342.0   462.0   490.7   613.0  1316.0      54 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate weighted registered voters and ballots cast </span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>df24_calc <span class="ot">&lt;-</span> join_df24_simp <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">reg_voters_wt =</span> reg_voters<span class="sc">*</span>percent_of_total_pop,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">ballots_cast_wt =</span> ballots_cast<span class="sc">*</span>percent_of_total_pop)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="calculate-total-numbers-to-check" class="level2">
<h2 class="anchored" data-anchor-id="calculate-total-numbers-to-check">calculate total numbers to check</h2>
<p>These calculations sum the values after being weighted by the geography splits. They should match the original voting precinct data.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df24_calc<span class="sc">$</span>reg_voters_wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co">#2,736,352 ~ 57 missing voters?</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2736352</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df24_calc<span class="sc">$</span>ballots_cast_wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co">#2,166,294 ~ 31 missing ballots cast</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2166294</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># does rounding make a difference?</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">sum</span>(df24_calc<span class="sc">$</span>reg_voters_wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span> <span class="dv">0</span>) <span class="co">#2,736,352 ~ still 57 missing voters</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2736352</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">sum</span>(df24_calc<span class="sc">$</span>ballots_cast_wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span><span class="dv">0</span>) <span class="co">#2,166,294 ~ still 31 missing ballots cast</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2166294</code></pre>
</div>
</div>
<p>After weighting, the total registered voters is 2,736,352 and the total number of ballots cast is 2,166,294. This means that there are 57 missing voters and 31 missing ballots. These go missing during the weighting step.</p>
<section id="checking-for-missing-votersballots" class="level3">
<h3 class="anchored" data-anchor-id="checking-for-missing-votersballots">checking for missing voters/ballots</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grouping and adding by precinct </span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> df24_calc <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(reg_voters_wt = case_when(is.na(reg_voters_wt)~0, # need to convert NA to 0 so they can be added</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#                                  TRUE ~ reg_voters_wt), # if this isn't included, when they're grouped, the NA's will cancel out the other values within the census tract</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#        ballots_cast_wt = case_when(is.na(ballots_cast_wt)~0,</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#                                    TRUE ~ ballots_cast_wt)) %&gt;% </span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(data_geog) <span class="sc">%&gt;%</span> <span class="co"># grouping on precinct</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="co">#reg_voters_test = sum(reg_voters_wt), # need to round</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>            <span class="co">#ballots_cast_test = sum(ballots_cast_wt), # need to round</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">reg_voters_test =</span> <span class="fu">round</span>(<span class="fu">sum</span>(reg_voters_wt), <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">ballots_cast_test =</span> <span class="fu">round</span>(<span class="fu">sum</span>(ballots_cast_wt), <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">'drop'</span>)</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> df24_calc <span class="sc">%&gt;%</span> </span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(test) <span class="sc">%&gt;%</span> </span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dif_voters =</span> <span class="fu">if_else</span>(reg_voters <span class="sc">==</span> reg_voters_test, <span class="st">"Match"</span>, <span class="st">"No Match"</span>),</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">dif_ballots =</span> <span class="fu">if_else</span>(ballots_cast <span class="sc">==</span> ballots_cast, <span class="st">"Match"</span>, <span class="st">"No Match"</span>))</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a><span class="co"># check number of matching/not matching records</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test2<span class="sc">$</span>dif_voters) <span class="co"># all matching once rounded 'reg_voters_wt' above</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Match 
 6240 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test2<span class="sc">$</span>dif_ballots) <span class="co"># all matching once rounded 'ballots_cast_wt' above</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Match 
 6297 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>test3 <span class="ot">&lt;-</span> df24_calc <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(data_geog) <span class="sc">%&gt;%</span> <span class="co"># grouping on precincts</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">total_pop =</span> <span class="fu">sum</span>(percent_of_total_pop))</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># when viewing the data frame in a separate window, all values are '1' but when looking at df in console there are some '1' and some '1.00'</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(test3<span class="sc">$</span>total_pop) <span class="co">#57 NAs</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
      1       1       1       1       1       1      57 </code></pre>
</div>
</div>
<p>Unable to find missing values?</p>
</section>
</section>
<section id="calculate-voter-turnout-by-registered-voters" class="level2">
<h2 class="anchored" data-anchor-id="calculate-voter-turnout-by-registered-voters">calculate voter turnout by registered voters</h2>
<p>(ballots cast/registered voters)<br>
This is not the final calculation because it is based on those who are already engaged to an extent, not the general population who are capable of voting.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>df24_calc_tract <span class="ot">&lt;-</span> df24_calc <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">reg_voters_wt =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(reg_voters_wt)<span class="sc">~</span><span class="dv">0</span>, <span class="co"># need to convert NA to 0 so they can be added</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="cn">TRUE</span> <span class="sc">~</span> reg_voters_wt), <span class="co"># if this isn't included, when they're grouped, the NA's will cancel out the other values within the census tract</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">ballots_cast_wt =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(ballots_cast_wt)<span class="sc">~</span><span class="dv">0</span>,</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>                                     <span class="cn">TRUE</span> <span class="sc">~</span> ballots_cast_wt)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(data_geog_type, planning_geog_type, </span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>           ofm_estimate_year, ofm_vintage, parcel_year,</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>           planning_geog) <span class="sc">%&gt;%</span> <span class="co"># grouping on tract ids, retaining other fields for reference</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="co">#reg_voters = sum(reg_voters_wt), # need to round?</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>            <span class="co">#ballots_cast = sum(ballots_cast_wt), # need to round?</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">reg_voters =</span> <span class="fu">round</span>(<span class="fu">sum</span>(reg_voters_wt), <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">ballots_cast =</span> <span class="fu">round</span>(<span class="fu">sum</span>(ballots_cast_wt), <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">regvote_turnout =</span> ballots_cast<span class="sc">/</span>reg_voters)</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate total numbers to check</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df24_calc_tract<span class="sc">$</span>reg_voters, <span class="at">na.rm=</span>T) <span class="co">#2,736,352 when not rounded, 2,736,358 when rounded</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2736358</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df24_calc_tract<span class="sc">$</span>ballots_cast, <span class="at">na.rm=</span>T) <span class="co">#2,166,294 when not rounded, 2,166,281 when rounded</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2166281</code></pre>
</div>
</div>
</section>
<section id="calculate-voter-turnout-by-population-18" class="level2">
<h2 class="anchored" data-anchor-id="calculate-voter-turnout-by-population-18">calculate voter turnout by population 18+</h2>
<p>(ballots cast/pop 18+)<br>
This is closer to the final calculation because it takes into account all people who are capable of voting. This value may include non-citizens, or adults 18+ who are not legally allowed to vote, but it is more comprehensive than just considering those who are registered.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># simplify acs table and join to voter/ballot data</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>age_18over_simp <span class="ot">&lt;-</span> age_18over <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, </span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">adult_18plus =</span> estimate, </span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">acs_year =</span> year,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">acs_reliability =</span> reliability)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="co"># join to precinct/voter turnout data to tract 18+ population data to calculate population 18+ turnout</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>df24_calc_tract_adults <span class="ot">&lt;-</span> df24_calc_tract <span class="sc">%&gt;%</span> </span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(age_18over_simp, </span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'planning_geog'</span><span class="ot">=</span><span class="st">'GEOID'</span>)) </span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate voter turnout by population 18+</span></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>df24_tract_total <span class="ot">&lt;-</span> df24_calc_tract_adults <span class="sc">%&gt;%</span> </span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop18_turnout =</span> ballots_cast<span class="sc">/</span>adult_18plus,</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">registered_pop18 =</span> reg_voters<span class="sc">/</span>adult_18plus)</span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a><span class="co"># check </span></span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_total<span class="sc">$</span>pop18_turnout) <span class="co">#1.21 max</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.05771 0.52531 0.64948 0.64339 0.77575 1.20692       1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_total<span class="sc">$</span>registered_pop18) <span class="co">#1.39 max</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.06716 0.70707 0.82388 0.81279 0.93916 1.39167       1 </code></pre>
</div>
</div>
<p>There are some tracts with higher than 100% voter turnout and registered voters.</p>
<section id="checking-tracts-with-over-100" class="level3">
<h3 class="anchored" data-anchor-id="checking-tracts-with-over-100">Checking tracts with over 100%</h3>
<section id="where-number-of-ballots-cast-is-greater-than-the-number-of-adults-18" class="level4">
<h4 class="anchored" data-anchor-id="where-number-of-ballots-cast-is-greater-than-the-number-of-adults-18">where number of ballots cast is greater than the number of adults 18+</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_totalpop <span class="ot">&lt;-</span> df24_tract_total <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pop18_turnout<span class="sc">&gt;</span><span class="dv">1</span>)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_totalpop</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 Ã— 14
   data_geog_type   planning_geog_type ofm_estimate_year ofm_vintage parcel_year
   &lt;chr&gt;            &lt;chr&gt;                          &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
 1 voter_precinct_â€¦ tract20                         2024        2024        2018
 2 voter_precinct_â€¦ tract20                         2024        2024        2018
 3 voter_precinct_â€¦ tract20                         2024        2024        2018
 4 voter_precinct_â€¦ tract20                         2024        2024        2018
 5 voter_precinct_â€¦ tract20                         2024        2024        2018
 6 voter_precinct_â€¦ tract20                         2024        2024        2018
 7 voter_precinct_â€¦ tract20                         2024        2024        2018
 8 voter_precinct_â€¦ tract20                         2024        2024        2018
 9 voter_precinct_â€¦ tract20                         2024        2024        2018
10 voter_precinct_â€¦ tract20                         2024        2024        2018
11 voter_precinct_â€¦ tract20                         2024        2024        2018
# â„¹ 9 more variables: planning_geog &lt;chr&gt;, reg_voters &lt;dbl&gt;,
#   ballots_cast &lt;dbl&gt;, regvote_turnout &lt;dbl&gt;, adult_18plus &lt;dbl&gt;,
#   acs_year &lt;dbl&gt;, acs_reliability &lt;chr&gt;, pop18_turnout &lt;dbl&gt;,
#   registered_pop18 &lt;dbl&gt;</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_totalpop_simp <span class="ot">&lt;-</span> df24_tract_above1_totalpop <span class="sc">%&gt;%</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(planning_geog, ballots_cast, adult_18plus, pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>There are 11 tracts over 100%.</p>
</section>
<section id="where-number-of-registered-voters-is-greater-than-the-number-of-adults-18" class="level4">
<h4 class="anchored" data-anchor-id="where-number-of-registered-voters-is-greater-than-the-number-of-adults-18">where number of registered voters is greater than the number of adults 18+</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_totalpop_reg <span class="ot">&lt;-</span> df24_tract_total <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(registered_pop18<span class="sc">&gt;</span><span class="dv">1</span>)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_totalpop_reg</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 111 Ã— 14
   data_geog_type   planning_geog_type ofm_estimate_year ofm_vintage parcel_year
   &lt;chr&gt;            &lt;chr&gt;                          &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
 1 voter_precinct_â€¦ tract20                         2024        2024        2018
 2 voter_precinct_â€¦ tract20                         2024        2024        2018
 3 voter_precinct_â€¦ tract20                         2024        2024        2018
 4 voter_precinct_â€¦ tract20                         2024        2024        2018
 5 voter_precinct_â€¦ tract20                         2024        2024        2018
 6 voter_precinct_â€¦ tract20                         2024        2024        2018
 7 voter_precinct_â€¦ tract20                         2024        2024        2018
 8 voter_precinct_â€¦ tract20                         2024        2024        2018
 9 voter_precinct_â€¦ tract20                         2024        2024        2018
10 voter_precinct_â€¦ tract20                         2024        2024        2018
# â„¹ 101 more rows
# â„¹ 9 more variables: planning_geog &lt;chr&gt;, reg_voters &lt;dbl&gt;,
#   ballots_cast &lt;dbl&gt;, regvote_turnout &lt;dbl&gt;, adult_18plus &lt;dbl&gt;,
#   acs_year &lt;dbl&gt;, acs_reliability &lt;chr&gt;, pop18_turnout &lt;dbl&gt;,
#   registered_pop18 &lt;dbl&gt;</code></pre>
</div>
</div>
<p>There are 111 tracts over 100%.</p>
<p>We could check against the proportion of adults 18+ out of the total population, in case some tracts have more/fewer children. The geography splits are based on total population, which assumes the distribution of adults 18+ matches the distribution of the total population.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check distribution of 18+ </span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(age_18over_total<span class="sc">$</span>pop18_total)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
 0.5919  0.7520  0.7898  0.7962  0.8275  1.0000       4 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(age_18over_total<span class="sc">$</span>pop18_total) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="voter-turnout-exploration_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There are some tracts where all of the population is 18+</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate weighted values for voter turnout based on population 18+ and based on registered voters</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>df24_tract_calculations <span class="ot">&lt;-</span> df24_tract_total <span class="sc">%&gt;%</span> </span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(age_18over_total,</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'planning_geog'</span><span class="ot">=</span><span class="st">'GEOID'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">reg_voters_wt18 =</span> reg_voters<span class="sc">*</span>pop18_total, <span class="co">#weight values calc from geog splits by eligible pop</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">ballots_cast_wt18 =</span> ballots_cast<span class="sc">*</span>pop18_total) <span class="sc">%&gt;%</span> <span class="co">#weight values calc from geog splits by eligible pop</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop18_turnout_wt18 =</span> ballots_cast_wt18<span class="sc">/</span>adult_18plus,</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">registered_pop18_wt18 =</span> reg_voters_wt18<span class="sc">/</span>adult_18plus)</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_calculations<span class="sc">$</span>pop18_turnout_wt18) <span class="co">#max: 0.961</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.05732 0.41785 0.51623 0.51058 0.61330 0.96109       1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_calculations<span class="sc">$</span>registered_pop18_wt18) <span class="co">#max: 1.05</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
 0.0667  0.5611  0.6547  0.6441  0.7368  1.0539       1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking tracts where registered voters/population 18+ (weighted) &gt;100%</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>df24_tract_calculations_above1 <span class="ot">&lt;-</span> df24_tract_calculations <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(registered_pop18_wt18<span class="sc">&gt;</span><span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>When weighted by the proportion 18+/total population, there are no tracts with over 100% voter tunrout based on ballots cast, however there are still 2 tracts that are over 100% when looking at registered voters.</p>
</section>
</section>
</section>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<section id="join-precinct-tract-to-geographies-to-turnout-data-1" class="level2">
<h2 class="anchored" data-anchor-id="join-precinct-tract-to-geographies-to-turnout-data-1">Join precinct-tract to geographies to turnout data</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df24_adult) <span class="co">#precinct-tract records: 6294</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6294</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(vt24_df) <span class="co">#voting data by unique precinct: 4608</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4608</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>vt24_df_0 <span class="ot">&lt;-</span> vt24_df <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(reg_voters<span class="sc">&lt;</span><span class="dv">1</span>) <span class="co"># there are 62 precincts without data</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="co"># data_geog = precinct</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co"># planning_geog = tract</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(df24_adult<span class="sc">$</span>data_geog)) <span class="co">#unique precincts: 4552</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4552</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(df24_adult<span class="sc">$</span>planning_geog)) <span class="co">#unique tracts: 919</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 919</code></pre>
</div>
</div>
<p>There is a difference in the number of records - in the voting data, there are 4,608 records (precincts) while the geography split data only has 4,552 unique precincts. The difference between these two data sets is 56 precincts. There are 62 precincts in the voting data without registered voters.</p>
<section id="checking-the-records-that-dont-line-up-between-the-two-data-sets-1" class="level3">
<h3 class="anchored" data-anchor-id="checking-the-records-that-dont-line-up-between-the-two-data-sets-1">checking the records that donâ€™t line up between the two data sets</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>outer <span class="ot">&lt;-</span> df24_total <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(vt24_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'data_geog'</span><span class="ot">=</span><span class="st">'precinctcode'</span>)) </span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(outer) <span class="co">#54 records</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 54</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(outer<span class="sc">$</span>percent_of_total_pop)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
0.001275 0.002583 0.010588 0.018519 0.033624 0.066509 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>outer2 <span class="ot">&lt;-</span> vt24_df <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df24_adult, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'precinctcode'</span><span class="ot">=</span><span class="st">'data_geog'</span>)) </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(outer2) <span class="co">#57 records</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 57</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(outer2<span class="sc">$</span>percent_of_total_pop)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Length  Class   Mode 
     0   NULL   NULL </code></pre>
</div>
</div>
<p>The output table from the first anti_join() includes census tract IDs without associated precincts.</p>
</section>
</section>
<section id="calculate-total-numbers-for-reference-1" class="level2">
<h2 class="anchored" data-anchor-id="calculate-total-numbers-for-reference-1">calculate total numbers for reference</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vt24_df<span class="sc">$</span>reg_voters) <span class="co">#2,736,409</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2736409</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vt24_df<span class="sc">$</span>ballots_cast) <span class="co">#2,166,325</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2166325</code></pre>
</div>
</div>
<p>In the 2024 voting data (by precinct), there were 2,736,409 registered voters and 2,166,325 ballots cast.</p>
</section>
<section id="join-voter-turnout-data-to-precinct-tract-splits-on-precinct-field-1" class="level2">
<h2 class="anchored" data-anchor-id="join-voter-turnout-data-to-precinct-tract-splits-on-precinct-field-1">join voter turnout data to precinct-tract splits on precinct field</h2>
<p>Using a full_join()</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>join_df24 <span class="ot">&lt;-</span> df24_adult <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(vt24_df, </span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'data_geog'</span><span class="ot">=</span><span class="st">'precinctcode'</span>)) <span class="co">#6351 records</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="co"># simplify data - remove unnecessary fields</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>join_df24_simp <span class="ot">&lt;-</span> join_df24 <span class="sc">%&gt;%</span> </span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(percent_of_group_quarters_pop, </span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>            percent_of_household_pop, </span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>            percent_of_housing_units,</span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>            percent_of_occupied_housing_units))</span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a><span class="co"># review data</span></span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(join_df24_simp<span class="sc">$</span>reg_voters) <span class="co">#54 NAs</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
    0.0   428.0   593.0   620.5   782.0  1727.0      54 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(join_df24_simp<span class="sc">$</span>ballots_cast) <span class="co">#54 NAs</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
    0.0   342.0   462.0   490.7   613.0  1316.0      54 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate weighted registered voters and ballots cast </span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>df24_calc <span class="ot">&lt;-</span> join_df24_simp <span class="sc">%&gt;%</span> </span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">reg_voters_wt =</span> reg_voters<span class="sc">*</span>percent_of_total_pop,</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">ballots_cast_wt =</span> ballots_cast<span class="sc">*</span>percent_of_total_pop)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="calculate-total-numbers-to-check-1" class="level2">
<h2 class="anchored" data-anchor-id="calculate-total-numbers-to-check-1">calculate total numbers to check</h2>
<p>These calculations sum the values after being weighted by the geography splits. They should match the original voting precinct data.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df24_calc<span class="sc">$</span>reg_voters_wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co">#2,736,352 ~ 57 missing voters?</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2736352</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df24_calc<span class="sc">$</span>ballots_cast_wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co">#2,166,294 ~ 31 missing ballots cast</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2166294</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># does rounding make a difference?</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">sum</span>(df24_calc<span class="sc">$</span>reg_voters_wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span> <span class="dv">0</span>) <span class="co">#2,736,352 ~ still 57 missing voters</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2736352</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">sum</span>(df24_calc<span class="sc">$</span>ballots_cast_wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span><span class="dv">0</span>) <span class="co">#2,166,294 ~ still 31 missing ballots cast</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2166294</code></pre>
</div>
</div>
<p>After weighting, the total registered voters is 2,736,352 and the total number of ballots cast is 2,166,294. This means that there are 57 missing voters and 31 missing ballots. These go missing during the weighting step.</p>
<section id="checking-for-missing-votersballots-1" class="level3">
<h3 class="anchored" data-anchor-id="checking-for-missing-votersballots-1">checking for missing voters/ballots</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grouping and adding by precinct </span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> df24_calc <span class="sc">%&gt;%</span> </span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(reg_voters_wt = case_when(is.na(reg_voters_wt)~0, # need to convert NA to 0 so they can be added</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#                                  TRUE ~ reg_voters_wt), # if this isn't included, when they're grouped, the NA's will cancel out the other values within the census tract</span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#        ballots_cast_wt = case_when(is.na(ballots_cast_wt)~0,</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#                                    TRUE ~ ballots_cast_wt)) %&gt;% </span></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(data_geog) <span class="sc">%&gt;%</span> <span class="co"># grouping on precinct</span></span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="co">#reg_voters_test = sum(reg_voters_wt), # need to round</span></span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a>            <span class="co">#ballots_cast_test = sum(ballots_cast_wt), # need to round</span></span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">reg_voters_test =</span> <span class="fu">round</span>(<span class="fu">sum</span>(reg_voters_wt), <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">ballots_cast_test =</span> <span class="fu">round</span>(<span class="fu">sum</span>(ballots_cast_wt), <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">'drop'</span>)</span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> df24_calc <span class="sc">%&gt;%</span> </span>
<span id="cb98-15"><a href="#cb98-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(test) <span class="sc">%&gt;%</span> </span>
<span id="cb98-16"><a href="#cb98-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dif_voters =</span> <span class="fu">if_else</span>(reg_voters <span class="sc">==</span> reg_voters_test, <span class="st">"Match"</span>, <span class="st">"No Match"</span>),</span>
<span id="cb98-17"><a href="#cb98-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">dif_ballots =</span> <span class="fu">if_else</span>(ballots_cast <span class="sc">==</span> ballots_cast, <span class="st">"Match"</span>, <span class="st">"No Match"</span>))</span>
<span id="cb98-18"><a href="#cb98-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-19"><a href="#cb98-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-20"><a href="#cb98-20" aria-hidden="true" tabindex="-1"></a><span class="co"># check number of matching/not matching records</span></span>
<span id="cb98-21"><a href="#cb98-21" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test2<span class="sc">$</span>dif_voters) <span class="co"># all matching once rounded 'reg_voters_wt' above</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Match 
 6240 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test2<span class="sc">$</span>dif_ballots) <span class="co"># all matching once rounded 'ballots_cast_wt' above</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Match 
 6297 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>test3 <span class="ot">&lt;-</span> df24_calc <span class="sc">%&gt;%</span> </span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(data_geog) <span class="sc">%&gt;%</span> <span class="co"># grouping on precincts</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">total_pop =</span> <span class="fu">sum</span>(percent_of_total_pop))</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="co"># when viewing the data frame in a separate window, all values are '1' but when looking at df in console there are some '1' and some '1.00'</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(test3<span class="sc">$</span>total_pop) <span class="co">#57 NAs</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
      1       1       1       1       1       1      57 </code></pre>
</div>
</div>
<p>Unable to find missing values?</p>
</section>
</section>
<section id="calculate-voter-turnout-by-registered-voters-1" class="level2">
<h2 class="anchored" data-anchor-id="calculate-voter-turnout-by-registered-voters-1">calculate voter turnout by registered voters</h2>
<p>(ballots cast/registered voters)<br>
This is not the final calculation because it is based on those who are already engaged to an extent, not the general population who are capable of voting.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>df24_calc_tract <span class="ot">&lt;-</span> df24_calc <span class="sc">%&gt;%</span> </span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">reg_voters_wt =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(reg_voters_wt)<span class="sc">~</span><span class="dv">0</span>, <span class="co"># need to convert NA to 0 so they can be added</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="cn">TRUE</span> <span class="sc">~</span> reg_voters_wt), <span class="co"># if this isn't included, when they're grouped, the NA's will cancel out the other values within the census tract</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">ballots_cast_wt =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(ballots_cast_wt)<span class="sc">~</span><span class="dv">0</span>,</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>                                     <span class="cn">TRUE</span> <span class="sc">~</span> ballots_cast_wt)) <span class="sc">%&gt;%</span> </span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(data_geog_type, planning_geog_type, </span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>           ofm_estimate_year, ofm_vintage, parcel_year,</span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>           planning_geog) <span class="sc">%&gt;%</span> <span class="co"># grouping on tract ids, retaining other fields for reference</span></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="co">#reg_voters = sum(reg_voters_wt), # need to round?</span></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>            <span class="co"># ballots_cast = sum(ballots_cast_wt), # need to round?</span></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">reg_voters =</span> <span class="fu">round</span>(<span class="fu">sum</span>(reg_voters_wt), <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">ballots_cast =</span> <span class="fu">round</span>(<span class="fu">sum</span>(ballots_cast_wt), <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">regvote_turnout =</span> ballots_cast<span class="sc">/</span>reg_voters)</span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate total numbers to check</span></span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df24_calc_tract<span class="sc">$</span>reg_voters, <span class="at">na.rm=</span>T) <span class="co">#2,736,352 when not rounded, 2,736,354 when rounded</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2736354</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df24_calc_tract<span class="sc">$</span>ballots_cast, <span class="at">na.rm=</span>T) <span class="co">#2,166,294 when not rounded, 2,166,297 when rounded</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2166297</code></pre>
</div>
</div>
</section>
<section id="calculate-voter-turnout-by-population-18-1" class="level2">
<h2 class="anchored" data-anchor-id="calculate-voter-turnout-by-population-18-1">calculate voter turnout by population 18+</h2>
<p>(ballots cast/pop 18+)<br>
This is closer to the final calculation because it takes into account all people who are capable of voting. This value may include non-citizens, or adults 18+ who are not legally allowed to vote, but it is more comprehensive than just considering those who are registered.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># simplify acs table and join to voter/ballot data</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>age_18over_simp <span class="ot">&lt;-</span> age_18over <span class="sc">%&gt;%</span> </span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, </span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">adult_18plus =</span> estimate, </span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">acs_year =</span> year,</span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">acs_reliability =</span> reliability)</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a><span class="co"># join to precinct/voter turnout data to tract 18+ population data to calculate population 18+ turnout</span></span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>df24_calc_tract_adults <span class="ot">&lt;-</span> df24_calc_tract <span class="sc">%&gt;%</span> </span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(age_18over_simp, </span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'planning_geog'</span><span class="ot">=</span><span class="st">'GEOID'</span>)) </span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-14"><a href="#cb108-14" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate voter turnout by population 18+</span></span>
<span id="cb108-15"><a href="#cb108-15" aria-hidden="true" tabindex="-1"></a>df24_tract_adult <span class="ot">&lt;-</span> df24_calc_tract_adults <span class="sc">%&gt;%</span> </span>
<span id="cb108-16"><a href="#cb108-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop18_turnout =</span> ballots_cast<span class="sc">/</span>adult_18plus,</span>
<span id="cb108-17"><a href="#cb108-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">registered_pop18 =</span> reg_voters<span class="sc">/</span>adult_18plus)</span>
<span id="cb108-18"><a href="#cb108-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-19"><a href="#cb108-19" aria-hidden="true" tabindex="-1"></a><span class="co"># check </span></span>
<span id="cb108-20"><a href="#cb108-20" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_adult<span class="sc">$</span>pop18_turnout) <span class="co">#1.21 max</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.05797 0.52459 0.65075 0.64347 0.77801 1.20157       1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_adult<span class="sc">$</span>registered_pop18) <span class="co">#1.39 max</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.06742 0.70995 0.82432 0.81289 0.93763 1.38536       1 </code></pre>
</div>
</div>
<p>There are some tracts with higher than 100% voter turnout and registered voters.</p>
<section id="checking-tracts-with-over-100-1" class="level3">
<h3 class="anchored" data-anchor-id="checking-tracts-with-over-100-1">Checking tracts with over 100%</h3>
<section id="where-number-of-ballots-cast-is-greater-than-the-number-of-adults-18-1" class="level4">
<h4 class="anchored" data-anchor-id="where-number-of-ballots-cast-is-greater-than-the-number-of-adults-18-1">where number of ballots cast is greater than the number of adults 18+</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_adultpop <span class="ot">&lt;-</span> df24_tract_adult <span class="sc">%&gt;%</span> </span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pop18_turnout<span class="sc">&gt;</span><span class="dv">1</span>)</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_adultpop</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 Ã— 14
  data_geog_type    planning_geog_type ofm_estimate_year ofm_vintage parcel_year
  &lt;chr&gt;             &lt;chr&gt;                          &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
1 voter_precinct_2â€¦ tract20                         2024        2024        2018
2 voter_precinct_2â€¦ tract20                         2024        2024        2018
3 voter_precinct_2â€¦ tract20                         2024        2024        2018
4 voter_precinct_2â€¦ tract20                         2024        2024        2018
5 voter_precinct_2â€¦ tract20                         2024        2024        2018
6 voter_precinct_2â€¦ tract20                         2024        2024        2018
7 voter_precinct_2â€¦ tract20                         2024        2024        2018
8 voter_precinct_2â€¦ tract20                         2024        2024        2018
9 voter_precinct_2â€¦ tract20                         2024        2024        2018
# â„¹ 9 more variables: planning_geog &lt;chr&gt;, reg_voters &lt;dbl&gt;,
#   ballots_cast &lt;dbl&gt;, regvote_turnout &lt;dbl&gt;, adult_18plus &lt;dbl&gt;,
#   acs_year &lt;dbl&gt;, acs_reliability &lt;chr&gt;, pop18_turnout &lt;dbl&gt;,
#   registered_pop18 &lt;dbl&gt;</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_adultpop_simp <span class="ot">&lt;-</span> df24_tract_above1_adultpop <span class="sc">%&gt;%</span> </span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(planning_geog, ballots_cast, adult_18plus, pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>There are 9 tracts over 100% - compared to 11 tracts when considering the total population.</p>
</section>
<section id="where-number-of-registered-voters-is-greater-than-the-number-of-adults-18-1" class="level4">
<h4 class="anchored" data-anchor-id="where-number-of-registered-voters-is-greater-than-the-number-of-adults-18-1">where number of registered voters is greater than the number of adults 18+</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_adultpop_reg <span class="ot">&lt;-</span> df24_tract_adult <span class="sc">%&gt;%</span> </span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(registered_pop18<span class="sc">&gt;</span><span class="dv">1</span>)</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_adultpop_reg</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 109 Ã— 14
   data_geog_type   planning_geog_type ofm_estimate_year ofm_vintage parcel_year
   &lt;chr&gt;            &lt;chr&gt;                          &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
 1 voter_precinct_â€¦ tract20                         2024        2024        2018
 2 voter_precinct_â€¦ tract20                         2024        2024        2018
 3 voter_precinct_â€¦ tract20                         2024        2024        2018
 4 voter_precinct_â€¦ tract20                         2024        2024        2018
 5 voter_precinct_â€¦ tract20                         2024        2024        2018
 6 voter_precinct_â€¦ tract20                         2024        2024        2018
 7 voter_precinct_â€¦ tract20                         2024        2024        2018
 8 voter_precinct_â€¦ tract20                         2024        2024        2018
 9 voter_precinct_â€¦ tract20                         2024        2024        2018
10 voter_precinct_â€¦ tract20                         2024        2024        2018
# â„¹ 99 more rows
# â„¹ 9 more variables: planning_geog &lt;chr&gt;, reg_voters &lt;dbl&gt;,
#   ballots_cast &lt;dbl&gt;, regvote_turnout &lt;dbl&gt;, adult_18plus &lt;dbl&gt;,
#   acs_year &lt;dbl&gt;, acs_reliability &lt;chr&gt;, pop18_turnout &lt;dbl&gt;,
#   registered_pop18 &lt;dbl&gt;</code></pre>
</div>
</div>
<p>There are 109 tracts over 100% - compared to 111 tracts when considering the total population.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate weighted values for voter turnout based on population 18+ and based on registered voters</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>df24_tract_calculations <span class="ot">&lt;-</span> df24_tract_adult <span class="sc">%&gt;%</span> </span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(age_18over_total,</span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'planning_geog'</span><span class="ot">=</span><span class="st">'GEOID'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">reg_voters_wt18 =</span> reg_voters<span class="sc">*</span>pop18_total, <span class="co">#weight values calc from geog splits by eligible pop</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">ballots_cast_wt18 =</span> ballots_cast<span class="sc">*</span>pop18_total) <span class="sc">%&gt;%</span> <span class="co">#weight values calc from geog splits by eligible pop</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop18_turnout_wt18 =</span> ballots_cast_wt18<span class="sc">/</span>adult_18plus,</span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">registered_pop18_wt18 =</span> reg_voters_wt18<span class="sc">/</span>adult_18plus)</span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_calculations<span class="sc">$</span>pop18_turnout_wt18) <span class="co">#max: 0.96375, compared to 0.961 when considering total population</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.05757 0.41696 0.51714 0.51086 0.61386 0.96375       1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_calculations<span class="sc">$</span>registered_pop18_wt18) <span class="co">#max: 1.05687, compared to 1.05 when considering total population</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.06695 0.56101 0.65480 0.64447 0.73787 1.05687       1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking tracts where registered voters/population 18+ (weighted) &gt;100%</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>df24_tract_calculations_above1 <span class="ot">&lt;-</span> df24_tract_calculations <span class="sc">%&gt;%</span> </span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(registered_pop18_wt18<span class="sc">&gt;</span><span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>When weighted by the proportion 18+/total population, there are no tracts with over 100% voter tunrout based on ballots cast, however there are still 3 tracts that are over 100% when looking at registered voters, compared to the 2 tracts when considering the total population.</p>
</section>
</section>
<section id="comparing-tracts" class="level3">
<h3 class="anchored" data-anchor-id="comparing-tracts">Comparing tracts</h3>
<p>To look compare the differences in the voter turnout for all tracts (based on ballots cast) between those calculated based on total population distribution and adult 18+ distribution</p>
<section id="all-tracts" class="level4">
<h4 class="anchored" data-anchor-id="all-tracts">All tracts</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>compare_all <span class="ot">&lt;-</span> df24_tract_total <span class="sc">%&gt;%</span> </span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(df24_tract_adult,</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"data_geog_type"</span>, <span class="st">"planning_geog_type"</span>,</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"ofm_estimate_year"</span>, <span class="st">"ofm_vintage"</span>,</span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"parcel_year"</span>, <span class="st">"planning_geog"</span>,</span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"acs_year"</span>))</span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>compare_all_calc <span class="ot">&lt;-</span> compare_all <span class="sc">%&gt;%</span> </span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dif_total_adult=</span>pop18_turnout.x<span class="sc">-</span>pop18_turnout.y)</span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>compare_all_calc_simp <span class="ot">&lt;-</span> compare_all_calc <span class="sc">%&gt;%</span> </span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(planning_geog, pop18_turnout.x, pop18_turnout.y, dif_total_adult)</span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(compare_all_calc<span class="sc">$</span>dif_total_adult)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Min.    1st Qu.     Median       Mean    3rd Qu.       Max.       NA's 
-0.0636152 -0.0023904  0.0000000 -0.0000805  0.0021663  0.0257143          1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(compare_all_calc<span class="sc">$</span>dif_total_adult)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="voter-turnout-exploration_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>filter <span class="ot">&lt;-</span> compare_all_calc <span class="sc">%&gt;%</span> </span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dif_total_adult<span class="sc">&lt;</span><span class="dv">0</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>This shows that the difference in voter turnout is more negative which means that when weighting by adult 18+ distribution the values are slightly higher than the values when just taking the total population distribution into account. The differences are relatively small, but 386 tracts have differences that are positive, while 418 are negative.</p>
</section>
<section id="those-above-100" class="level4">
<h4 class="anchored" data-anchor-id="those-above-100">Those above 100%</h4>
<p>To compare the differences in the voter turnout values for the tracts over 100% (based on ballots cast) between those calculated based on total population distribution and adult 18+ distribution</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>compare_above1 <span class="ot">&lt;-</span> df24_tract_above1_totalpop <span class="sc">%&gt;%</span> </span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">full_join</span>(df24_tract_above1_adultpop,</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"data_geog_type"</span>, <span class="st">"planning_geog_type"</span>,</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"ofm_estimate_year"</span>, <span class="st">"ofm_vintage"</span>,</span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"parcel_year"</span>, <span class="st">"planning_geog"</span>,</span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"acs_year"</span>, </span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"acs_reliability"</span>)) <span class="co">#reliability is good for all tracts in both datasets</span></span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a>compare_above1_calc <span class="ot">&lt;-</span> compare_above1 <span class="sc">%&gt;%</span> </span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dif_total_adult=</span>pop18_turnout.x<span class="sc">-</span>pop18_turnout.y)</span>
<span id="cb126-11"><a href="#cb126-11" aria-hidden="true" tabindex="-1"></a>compare_above1_calc_simp <span class="ot">&lt;-</span> compare_above1_calc <span class="sc">%&gt;%</span> </span>
<span id="cb126-12"><a href="#cb126-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(planning_geog, pop18_turnout.x, pop18_turnout.y, dif_total_adult)</span>
<span id="cb126-13"><a href="#cb126-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-14"><a href="#cb126-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(compare_above1_calc<span class="sc">$</span>dif_total_adult)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Min.   1st Qu.    Median      Mean   3rd Qu.      Max.      NA's 
-0.007771  0.000000  0.001098  0.003355  0.005350  0.025714         2 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(compare_above1_calc<span class="sc">$</span>dif_total_adult)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="voter-turnout-exploration_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<section id="join-precinct-tract-to-geographies-to-turnout-data-2" class="level2">
<h2 class="anchored" data-anchor-id="join-precinct-tract-to-geographies-to-turnout-data-2">Join precinct-tract to geographies to turnout data</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df24_adult_dec) <span class="co">#precinct-tract records: 6294</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6294</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(vt24_df) <span class="co">#voting data by unique precinct: 4608</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4608</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>vt24_df_0 <span class="ot">&lt;-</span> vt24_df <span class="sc">%&gt;%</span> </span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(reg_voters<span class="sc">&lt;</span><span class="dv">1</span>) <span class="co"># there are 62 precincts without data</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="co"># data_geog = precinct</span></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="co"># planning_geog = tract</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(df24_adult_dec<span class="sc">$</span>data_geog)) <span class="co">#unique precincts: 4552</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4552</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(df24_adult_dec<span class="sc">$</span>planning_geog)) <span class="co">#unique tracts: 919</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 919</code></pre>
</div>
</div>
<p>There is a difference in the number of records - in the voting data, there are 4,608 records (precincts) while the geography split data only has 4,552 unique precincts. The difference between these two data sets is 56 precincts. There are 62 precincts in the voting data without registered voters.</p>
<section id="checking-the-records-that-dont-line-up-between-the-two-data-sets-2" class="level3">
<h3 class="anchored" data-anchor-id="checking-the-records-that-dont-line-up-between-the-two-data-sets-2">checking the records that donâ€™t line up between the two data sets</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>outer <span class="ot">&lt;-</span> df24_adult_dec <span class="sc">%&gt;%</span> </span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(vt24_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'data_geog'</span><span class="ot">=</span><span class="st">'precinctcode'</span>)) </span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(outer) <span class="co">#54 records</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 54</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(outer<span class="sc">$</span>percent_of_total_pop)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
0.001354 0.002459 0.010078 0.018519 0.031937 0.067722 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>outer2 <span class="ot">&lt;-</span> vt24_df <span class="sc">%&gt;%</span> </span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df24_adult_dec, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'precinctcode'</span><span class="ot">=</span><span class="st">'data_geog'</span>)) </span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(outer2) <span class="co">#57 records</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 57</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(outer2<span class="sc">$</span>percent_of_total_pop)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Length  Class   Mode 
     0   NULL   NULL </code></pre>
</div>
</div>
<p>The output table from the first anti_join() includes census tract IDs without associated precincts.</p>
</section>
</section>
<section id="calculate-total-numbers-for-reference-2" class="level2">
<h2 class="anchored" data-anchor-id="calculate-total-numbers-for-reference-2">calculate total numbers for reference</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vt24_df<span class="sc">$</span>reg_voters) <span class="co">#2,736,409</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2736409</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vt24_df<span class="sc">$</span>ballots_cast) <span class="co">#2,166,325</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2166325</code></pre>
</div>
</div>
<p>In the 2024 voting data (by precinct), there were 2,736,409 registered voters and 2,166,325 ballots cast.</p>
</section>
<section id="join-voter-turnout-data-to-precinct-tract-splits-on-precinct-field-2" class="level2">
<h2 class="anchored" data-anchor-id="join-voter-turnout-data-to-precinct-tract-splits-on-precinct-field-2">join voter turnout data to precinct-tract splits on precinct field</h2>
<p>Using a full_join()</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>join_df24 <span class="ot">&lt;-</span> df24_adult_dec <span class="sc">%&gt;%</span> </span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(vt24_df, </span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'data_geog'</span><span class="ot">=</span><span class="st">'precinctcode'</span>)) <span class="co">#6351 records</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a><span class="co"># simplify data - remove unnecessary fields</span></span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a>join_df24_simp <span class="ot">&lt;-</span> join_df24 <span class="sc">%&gt;%</span> </span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(percent_of_group_quarters_pop, </span>
<span id="cb149-9"><a href="#cb149-9" aria-hidden="true" tabindex="-1"></a>            percent_of_household_pop, </span>
<span id="cb149-10"><a href="#cb149-10" aria-hidden="true" tabindex="-1"></a>            percent_of_housing_units,</span>
<span id="cb149-11"><a href="#cb149-11" aria-hidden="true" tabindex="-1"></a>            percent_of_occupied_housing_units))</span>
<span id="cb149-12"><a href="#cb149-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-13"><a href="#cb149-13" aria-hidden="true" tabindex="-1"></a><span class="co"># review data</span></span>
<span id="cb149-14"><a href="#cb149-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(join_df24_simp<span class="sc">$</span>reg_voters) <span class="co">#54 NAs</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
    0.0   428.0   593.0   620.5   782.0  1727.0      54 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(join_df24_simp<span class="sc">$</span>ballots_cast) <span class="co">#54 NAs</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
    0.0   342.0   462.0   490.7   613.0  1316.0      54 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate weighted registered voters and ballots cast </span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>df24_calc <span class="ot">&lt;-</span> join_df24_simp <span class="sc">%&gt;%</span> </span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">reg_voters_wt =</span> reg_voters<span class="sc">*</span>percent_of_total_pop,</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">ballots_cast_wt =</span> ballots_cast<span class="sc">*</span>percent_of_total_pop)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="calculate-total-numbers-to-check-2" class="level2">
<h2 class="anchored" data-anchor-id="calculate-total-numbers-to-check-2">calculate total numbers to check</h2>
<p>These calculations sum the values after being weighted by the geography splits. They should match the original voting precinct data.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df24_calc<span class="sc">$</span>reg_voters_wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co">#2,736,352 ~ 57 missing voters?</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2736352</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df24_calc<span class="sc">$</span>ballots_cast_wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co">#2,166,294 ~ 31 missing ballots cast</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2166294</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co"># does rounding make a difference?</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">sum</span>(df24_calc<span class="sc">$</span>reg_voters_wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span> <span class="dv">0</span>) <span class="co">#2,736,352 ~ still 57 missing voters</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2736352</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">sum</span>(df24_calc<span class="sc">$</span>ballots_cast_wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span><span class="dv">0</span>) <span class="co">#2,166,294 ~ still 31 missing ballots cast</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2166294</code></pre>
</div>
</div>
<p>After weighting, the total registered voters is 2,736,352 and the total number of ballots cast is 2,166,294. This means that there are 57 missing voters and 31 missing ballots. These go missing during the weighting step.</p>
<section id="checking-for-missing-votersballots-2" class="level3">
<h3 class="anchored" data-anchor-id="checking-for-missing-votersballots-2">checking for missing voters/ballots</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grouping and adding by precinct </span></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> df24_calc <span class="sc">%&gt;%</span> </span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(reg_voters_wt = case_when(is.na(reg_voters_wt)~0, # need to convert NA to 0 so they can be added</span></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#                                  TRUE ~ reg_voters_wt), # if this isn't included, when they're grouped, the NA's will cancel out the other values within the census tract</span></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#        ballots_cast_wt = case_when(is.na(ballots_cast_wt)~0,</span></span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#                                    TRUE ~ ballots_cast_wt)) %&gt;% </span></span>
<span id="cb162-7"><a href="#cb162-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(data_geog) <span class="sc">%&gt;%</span> <span class="co"># grouping on precinct</span></span>
<span id="cb162-8"><a href="#cb162-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="co">#reg_voters_test = sum(reg_voters_wt), # need to round</span></span>
<span id="cb162-9"><a href="#cb162-9" aria-hidden="true" tabindex="-1"></a>            <span class="co">#ballots_cast_test = sum(ballots_cast_wt), # need to round</span></span>
<span id="cb162-10"><a href="#cb162-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">reg_voters_test =</span> <span class="fu">round</span>(<span class="fu">sum</span>(reg_voters_wt), <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb162-11"><a href="#cb162-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">ballots_cast_test =</span> <span class="fu">round</span>(<span class="fu">sum</span>(ballots_cast_wt), <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb162-12"><a href="#cb162-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">'drop'</span>)</span>
<span id="cb162-13"><a href="#cb162-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-14"><a href="#cb162-14" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> df24_calc <span class="sc">%&gt;%</span> </span>
<span id="cb162-15"><a href="#cb162-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(test) <span class="sc">%&gt;%</span> </span>
<span id="cb162-16"><a href="#cb162-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dif_voters =</span> <span class="fu">if_else</span>(reg_voters <span class="sc">==</span> reg_voters_test, <span class="st">"Match"</span>, <span class="st">"No Match"</span>),</span>
<span id="cb162-17"><a href="#cb162-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">dif_ballots =</span> <span class="fu">if_else</span>(ballots_cast <span class="sc">==</span> ballots_cast, <span class="st">"Match"</span>, <span class="st">"No Match"</span>))</span>
<span id="cb162-18"><a href="#cb162-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-19"><a href="#cb162-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-20"><a href="#cb162-20" aria-hidden="true" tabindex="-1"></a><span class="co"># check number of matching/not matching records</span></span>
<span id="cb162-21"><a href="#cb162-21" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test2<span class="sc">$</span>dif_voters) <span class="co"># all matching once rounded 'reg_voters_wt' above</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Match 
 6240 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test2<span class="sc">$</span>dif_ballots) <span class="co"># all matching once rounded 'ballots_cast_wt' above</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Match 
 6297 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>test3 <span class="ot">&lt;-</span> df24_calc <span class="sc">%&gt;%</span> </span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(data_geog) <span class="sc">%&gt;%</span> <span class="co"># grouping on precincts</span></span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">total_pop =</span> <span class="fu">sum</span>(percent_of_total_pop))</span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a><span class="co"># when viewing the data frame in a separate window, all values are '1' but when looking at df in console there are some '1' and some '1.00'</span></span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(test3<span class="sc">$</span>total_pop) <span class="co">#57 NAs</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
      1       1       1       1       1       1      57 </code></pre>
</div>
</div>
<p>Unable to find missing values?</p>
</section>
</section>
<section id="calculate-voter-turnout-by-registered-voters-2" class="level2">
<h2 class="anchored" data-anchor-id="calculate-voter-turnout-by-registered-voters-2">calculate voter turnout by registered voters</h2>
<p>(ballots cast/registered voters)<br>
This is not the final calculation because it is based on those who are already engaged to an extent, not the general population who are capable of voting.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>df24_calc_tract <span class="ot">&lt;-</span> df24_calc <span class="sc">%&gt;%</span> </span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">reg_voters_wt =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(reg_voters_wt)<span class="sc">~</span><span class="dv">0</span>, <span class="co"># need to convert NA to 0 so they can be added</span></span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="cn">TRUE</span> <span class="sc">~</span> reg_voters_wt), <span class="co"># if this isn't included, when they're grouped, the NA's will cancel out the other values within the census tract</span></span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">ballots_cast_wt =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(ballots_cast_wt)<span class="sc">~</span><span class="dv">0</span>,</span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a>                                     <span class="cn">TRUE</span> <span class="sc">~</span> ballots_cast_wt)) <span class="sc">%&gt;%</span> </span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(data_geog_type, planning_geog_type, </span>
<span id="cb168-7"><a href="#cb168-7" aria-hidden="true" tabindex="-1"></a>           ofm_estimate_year, ofm_vintage, </span>
<span id="cb168-8"><a href="#cb168-8" aria-hidden="true" tabindex="-1"></a>           planning_geog) <span class="sc">%&gt;%</span> <span class="co"># grouping on tract ids, retaining other fields for reference</span></span>
<span id="cb168-9"><a href="#cb168-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="co">#reg_voters = sum(reg_voters_wt), # need to round?</span></span>
<span id="cb168-10"><a href="#cb168-10" aria-hidden="true" tabindex="-1"></a>            <span class="co"># ballots_cast = sum(ballots_cast_wt), # need to round?</span></span>
<span id="cb168-11"><a href="#cb168-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">reg_voters =</span> <span class="fu">round</span>(<span class="fu">sum</span>(reg_voters_wt), <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb168-12"><a href="#cb168-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">ballots_cast =</span> <span class="fu">round</span>(<span class="fu">sum</span>(ballots_cast_wt), <span class="at">digits =</span> <span class="dv">0</span>),</span>
<span id="cb168-13"><a href="#cb168-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb168-14"><a href="#cb168-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">regvote_turnout =</span> ballots_cast<span class="sc">/</span>reg_voters)</span>
<span id="cb168-15"><a href="#cb168-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-16"><a href="#cb168-16" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate total numbers to check</span></span>
<span id="cb168-17"><a href="#cb168-17" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df24_calc_tract<span class="sc">$</span>reg_voters, <span class="at">na.rm=</span>T) <span class="co">#2,736,352 when not rounded, 2,736,354 when rounded</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2736354</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df24_calc_tract<span class="sc">$</span>ballots_cast, <span class="at">na.rm=</span>T) <span class="co">#2,166,294 when not rounded, 2,166,293 when rounded</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2166293</code></pre>
</div>
</div>
</section>
<section id="calculate-voter-turnout-by-population-18-2" class="level2">
<h2 class="anchored" data-anchor-id="calculate-voter-turnout-by-population-18-2">calculate voter turnout by population 18+</h2>
<p>(ballots cast/pop 18+)<br>
This is closer to the final calculation because it takes into account all people who are capable of voting. This value may include non-citizens, or adults 18+ who are not legally allowed to vote, but it is more comprehensive than just considering those who are registered.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># simplify acs table and join to voter/ballot data</span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>age_18over_simp <span class="ot">&lt;-</span> age_18over <span class="sc">%&gt;%</span> </span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, </span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">adult_18plus =</span> estimate, </span>
<span id="cb172-5"><a href="#cb172-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">acs_year =</span> year,</span>
<span id="cb172-6"><a href="#cb172-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">acs_reliability =</span> reliability)</span>
<span id="cb172-7"><a href="#cb172-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-8"><a href="#cb172-8" aria-hidden="true" tabindex="-1"></a><span class="co"># join to precinct/voter turnout data to tract 18+ population data to calculate population 18+ turnout</span></span>
<span id="cb172-9"><a href="#cb172-9" aria-hidden="true" tabindex="-1"></a>df24_calc_tract_adults <span class="ot">&lt;-</span> df24_calc_tract <span class="sc">%&gt;%</span> </span>
<span id="cb172-10"><a href="#cb172-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(age_18over_simp, </span>
<span id="cb172-11"><a href="#cb172-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'planning_geog'</span><span class="ot">=</span><span class="st">'GEOID'</span>)) </span>
<span id="cb172-12"><a href="#cb172-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb172-13"><a href="#cb172-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-14"><a href="#cb172-14" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate voter turnout by population 18+</span></span>
<span id="cb172-15"><a href="#cb172-15" aria-hidden="true" tabindex="-1"></a>df24_tract_adult_dec <span class="ot">&lt;-</span> df24_calc_tract_adults <span class="sc">%&gt;%</span> </span>
<span id="cb172-16"><a href="#cb172-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop18_turnout =</span> ballots_cast<span class="sc">/</span>adult_18plus,</span>
<span id="cb172-17"><a href="#cb172-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">registered_pop18 =</span> reg_voters<span class="sc">/</span>adult_18plus)</span>
<span id="cb172-18"><a href="#cb172-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-19"><a href="#cb172-19" aria-hidden="true" tabindex="-1"></a><span class="co"># check </span></span>
<span id="cb172-20"><a href="#cb172-20" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_adult_dec<span class="sc">$</span>pop18_turnout) <span class="co">#1.20 max</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.05746 0.52671 0.64939 0.64347 0.77600 1.20329       1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_adult_dec<span class="sc">$</span>registered_pop18) <span class="co">#1.39 max</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.06691 0.70735 0.82427 0.81290 0.94074 1.38747       1 </code></pre>
</div>
</div>
<p>There are some tracts with higher than 100% voter turnout and registered voters.</p>
<section id="checking-tracts-with-over-100-2" class="level3">
<h3 class="anchored" data-anchor-id="checking-tracts-with-over-100-2">Checking tracts with over 100%</h3>
<section id="where-number-of-ballots-cast-is-greater-than-the-number-of-adults-18-2" class="level4">
<h4 class="anchored" data-anchor-id="where-number-of-ballots-cast-is-greater-than-the-number-of-adults-18-2">where number of ballots cast is greater than the number of adults 18+</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_adultpop_dec <span class="ot">&lt;-</span> df24_tract_adult_dec <span class="sc">%&gt;%</span> </span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pop18_turnout<span class="sc">&gt;</span><span class="dv">1</span>)</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_adultpop_dec</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 Ã— 13
   data_geog_type planning_geog_type ofm_estimate_year ofm_vintage planning_geog
   &lt;chr&gt;          &lt;chr&gt;                          &lt;int&gt;       &lt;int&gt; &lt;chr&gt;        
 1 voter_precincâ€¦ tract20                         2024        2024 53033000500  
 2 voter_precincâ€¦ tract20                         2024        2024 53033027702  
 3 voter_precincâ€¦ tract20                         2024        2024 53035091001  
 4 voter_precincâ€¦ tract20                         2024        2024 53035091002  
 5 voter_precincâ€¦ tract20                         2024        2024 53053070208  
 6 voter_precincâ€¦ tract20                         2024        2024 53053070314  
 7 voter_precincâ€¦ tract20                         2024        2024 53053072405  
 8 voter_precincâ€¦ tract20                         2024        2024 53053072410  
 9 voter_precincâ€¦ tract20                         2024        2024 53061050501  
10 voter_precincâ€¦ tract20                         2024        2024 53061050600  
# â„¹ 8 more variables: reg_voters &lt;dbl&gt;, ballots_cast &lt;dbl&gt;,
#   regvote_turnout &lt;dbl&gt;, adult_18plus &lt;dbl&gt;, acs_year &lt;dbl&gt;,
#   acs_reliability &lt;chr&gt;, pop18_turnout &lt;dbl&gt;, registered_pop18 &lt;dbl&gt;</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_adultpop_dec_simp <span class="ot">&lt;-</span> df24_tract_above1_adultpop_dec <span class="sc">%&gt;%</span> </span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(planning_geog, ballots_cast, adult_18plus, pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>There are 10 tracts over 100% - compared to 9 tracts over 100% when considering the adult population (by tract, 2023 5y estimates) and compared to 11 tracts when considering the total population.</p>
</section>
<section id="where-number-of-registered-voters-is-greater-than-the-number-of-adults-18-2" class="level4">
<h4 class="anchored" data-anchor-id="where-number-of-registered-voters-is-greater-than-the-number-of-adults-18-2">where number of registered voters is greater than the number of adults 18+</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_adultpop_reg_dec <span class="ot">&lt;-</span> df24_tract_adult_dec <span class="sc">%&gt;%</span> </span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(registered_pop18<span class="sc">&gt;</span><span class="dv">1</span>)</span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_adultpop_reg_dec</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 115 Ã— 13
   data_geog_type planning_geog_type ofm_estimate_year ofm_vintage planning_geog
   &lt;chr&gt;          &lt;chr&gt;                          &lt;int&gt;       &lt;int&gt; &lt;chr&gt;        
 1 voter_precincâ€¦ tract20                         2024        2024 53033000500  
 2 voter_precincâ€¦ tract20                         2024        2024 53033003100  
 3 voter_precincâ€¦ tract20                         2024        2024 53033003400  
 4 voter_precincâ€¦ tract20                         2024        2024 53033004101  
 5 voter_precincâ€¦ tract20                         2024        2024 53033004201  
 6 voter_precincâ€¦ tract20                         2024        2024 53033005100  
 7 voter_precincâ€¦ tract20                         2024        2024 53033005600  
 8 voter_precincâ€¦ tract20                         2024        2024 53033009801  
 9 voter_precincâ€¦ tract20                         2024        2024 53033010302  
10 voter_precincâ€¦ tract20                         2024        2024 53033010602  
# â„¹ 105 more rows
# â„¹ 8 more variables: reg_voters &lt;dbl&gt;, ballots_cast &lt;dbl&gt;,
#   regvote_turnout &lt;dbl&gt;, adult_18plus &lt;dbl&gt;, acs_year &lt;dbl&gt;,
#   acs_reliability &lt;chr&gt;, pop18_turnout &lt;dbl&gt;, registered_pop18 &lt;dbl&gt;</code></pre>
</div>
</div>
<p>There are 115 tracts over 100% - compared to 109 tracts over 100% when considering the adult population (by tract, 2023 5y estimates) and compared to 111 tracts when considering the total population.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate weighted values for voter turnout based on population 18+ and based on registered voters</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>df24_tract_calculations <span class="ot">&lt;-</span> df24_tract_adult_dec <span class="sc">%&gt;%</span> </span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(age_18over_total,</span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'planning_geog'</span><span class="ot">=</span><span class="st">'GEOID'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">reg_voters_wt18 =</span> reg_voters<span class="sc">*</span>pop18_total, <span class="co">#weight values calc from geog splits by eligible pop</span></span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">ballots_cast_wt18 =</span> ballots_cast<span class="sc">*</span>pop18_total) <span class="sc">%&gt;%</span> <span class="co">#weight values calc from geog splits by eligible pop</span></span>
<span id="cb181-7"><a href="#cb181-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop18_turnout_wt18 =</span> ballots_cast_wt18<span class="sc">/</span>adult_18plus,</span>
<span id="cb181-8"><a href="#cb181-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">registered_pop18_wt18 =</span> reg_voters_wt18<span class="sc">/</span>adult_18plus)</span>
<span id="cb181-9"><a href="#cb181-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-10"><a href="#cb181-10" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_calculations<span class="sc">$</span>pop18_turnout_wt18) <span class="co">#max: 0.96342, compared to 0.96375 when considering adult population by tract, compared to 0.961 when considering total population</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.05706 0.41817 0.51623 0.51074 0.61376 0.96342       1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_calculations<span class="sc">$</span>registered_pop18_wt18) <span class="co">#max: 1.05653, compared to 1.05687 when considering adult population by tract, compared to 1.05 when considering total population</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.06645 0.56131 0.65484 0.64433 0.73828 1.05653       1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking tracts where registered voters/population 18+ (weighted) &gt;100%</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>df24_tract_calculations_above1 <span class="ot">&lt;-</span> df24_tract_calculations <span class="sc">%&gt;%</span> </span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(registered_pop18_wt18<span class="sc">&gt;</span><span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>There are still 3 tracts that are over 100% when looking at registered voters, compared to the 2 tracts when considering the total population.</p>
</section>
</section>
<section id="comparing-tracts-1" class="level3">
<h3 class="anchored" data-anchor-id="comparing-tracts-1">Comparing tracts</h3>
<p>To look compare the differences in the voter turnout for all tracts (based on ballots cast) between those calculated based on total population distribution and adult 18+ distribution</p>
<section id="all-tracts-1" class="level4">
<h4 class="anchored" data-anchor-id="all-tracts-1">All tracts</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>compare_all <span class="ot">&lt;-</span> df24_tract_adult <span class="sc">%&gt;%</span> </span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(df24_tract_adult_dec,</span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"data_geog_type"</span>, <span class="st">"planning_geog_type"</span>,</span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"ofm_estimate_year"</span>, <span class="st">"ofm_vintage"</span>,</span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"planning_geog"</span>,</span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"acs_year"</span>))</span>
<span id="cb186-7"><a href="#cb186-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-8"><a href="#cb186-8" aria-hidden="true" tabindex="-1"></a>compare_all_calc <span class="ot">&lt;-</span> compare_all <span class="sc">%&gt;%</span> </span>
<span id="cb186-9"><a href="#cb186-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dif_tract_bg=</span>pop18_turnout.x<span class="sc">-</span>pop18_turnout.y)</span>
<span id="cb186-10"><a href="#cb186-10" aria-hidden="true" tabindex="-1"></a>compare_all_calc_simp <span class="ot">&lt;-</span> compare_all_calc <span class="sc">%&gt;%</span> </span>
<span id="cb186-11"><a href="#cb186-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(planning_geog, pop18_turnout.x, pop18_turnout.y, dif_tract_bg)</span>
<span id="cb186-12"><a href="#cb186-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-13"><a href="#cb186-13" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(compare_all_calc<span class="sc">$</span>dif_tract_bg)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Min.    1st Qu.     Median       Mean    3rd Qu.       Max.       NA's 
-0.0265126 -0.0019440  0.0000000 -0.0000012  0.0019656  0.0256037          1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(compare_all_calc<span class="sc">$</span>dif_tract_bg)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="voter-turnout-exploration_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>filter <span class="ot">&lt;-</span> compare_all_calc <span class="sc">%&gt;%</span> </span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dif_tract_bg<span class="sc">&gt;</span><span class="dv">0</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>This shows that the difference in voter turnout is slightly more positive which means that when weighting by adult 18+ distribution (tract) the values are slightly higher than the values when just taking the adult 18+ distribution (block group, dec) into account. The differences are relatively small, but 453 tracts have differences that are positive, while 446 are negative.</p>
</section>
<section id="those-above-100-1" class="level4">
<h4 class="anchored" data-anchor-id="those-above-100-1">Those above 100%</h4>
<p>To compare the differences in the voter turnout values for the tracts over 100% (based on ballots cast) between those calculated based on total population distribution and adult 18+ distribution</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>compare_above1 <span class="ot">&lt;-</span> df24_tract_above1_adultpop <span class="sc">%&gt;%</span> </span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">full_join</span>(df24_tract_above1_adultpop_dec,</span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"data_geog_type"</span>, <span class="st">"planning_geog_type"</span>,</span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"ofm_estimate_year"</span>, <span class="st">"ofm_vintage"</span>,</span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"planning_geog"</span>,</span>
<span id="cb190-6"><a href="#cb190-6" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"acs_year"</span>, <span class="st">"adult_18plus"</span>, </span>
<span id="cb190-7"><a href="#cb190-7" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"acs_reliability"</span>)) <span class="co">#reliability is good for all tracts in both datasets</span></span>
<span id="cb190-8"><a href="#cb190-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-9"><a href="#cb190-9" aria-hidden="true" tabindex="-1"></a>compare_above1_calc <span class="ot">&lt;-</span> compare_above1 <span class="sc">%&gt;%</span> </span>
<span id="cb190-10"><a href="#cb190-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dif_tract_bg=</span>pop18_turnout.x<span class="sc">-</span>pop18_turnout.y)</span>
<span id="cb190-11"><a href="#cb190-11" aria-hidden="true" tabindex="-1"></a>compare_above1_calc_simp <span class="ot">&lt;-</span> compare_above1_calc <span class="sc">%&gt;%</span> </span>
<span id="cb190-12"><a href="#cb190-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(planning_geog, pop18_turnout.x, pop18_turnout.y, dif_tract_bg)</span>
<span id="cb190-13"><a href="#cb190-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-14"><a href="#cb190-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(compare_above1_calc<span class="sc">$</span>dif_tract_bg)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Min.    1st Qu.     Median       Mean    3rd Qu.       Max.       NA's 
-0.0142857 -0.0017195 -0.0002489 -0.0019399  0.0000000  0.0049080          1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(compare_above1_calc<span class="sc">$</span>dif_tract_bg)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="voter-turnout-exploration_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
</div>
<div id="tabset-1-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-6-tab">
<section id="overall" class="level2">
<h2 class="anchored" data-anchor-id="overall">Overall</h2>
<p>Out of the three methods explored above, the second approach appears to be the best.</p>
</section>
<section id="process" class="level2">
<h2 class="anchored" data-anchor-id="process">Process</h2>
<p>We tested the second approach to determine if using adult 18+ population estimates in order to weight the initial population distribution (based on OFM parcels) would improve the issue of tracts with over 100% voter turnout. This was mostly based on the assumption that the population distribution of adults 18+ does not mirror the total population distribution - there are likely some areas where there are more or fewer households with children or young adults than others.<br>
<br>
We tested the third approach to determine if using adult 18+ population estimates at a more granular geographic scale in order to weight the population distribution would improve the issue of tracts with over 100% voter turnout. Perhaps estimates at the block group were better at accurately reflecting the population distribution, which would have resulted in more accurate weighting/translation between the precinct and tract.</p>
</section>
<section id="rationale" class="level2">
<h2 class="anchored" data-anchor-id="rationale">Rationale</h2>
<p>Although there are still some concerns about the final numbers because tracts with over 100% voter turnout persist, the ability to weight the population distribution by the adult 18+ population seems to be the most accurate in terms or representing eligible voters. This makes the second and third approach more attractive than the first.</p>
<p>Although the geographic resolution of block groups (third approach) is more refined than tracts (second approach), the additional geographic detail did not resolve the issue of tracts with over 100% voter turnout. In addition, the ability to use population estimates most closely aligned with the election year (2023 for second approach vs.&nbsp;2020 for third approach) seems to outweigh the potential benefits of additional geographic accuracy. Using block group data from the decennial census would become more challenging to justify as the distance between 2020 and the election year increases (2028). This makes the second approach more attractive than the third.</p>
</section>
<section id="summary-of-results" class="level2">
<h2 class="anchored" data-anchor-id="summary-of-results">Summary of results</h2>
<section id="st-approach" class="level3">
<h3 class="anchored" data-anchor-id="st-approach">1st approach</h3>
<section id="all-tracts-2" class="level4">
<h4 class="anchored" data-anchor-id="all-tracts-2">All tracts</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_total<span class="sc">$</span>pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.05771 0.52531 0.64948 0.64339 0.77575 1.20692       1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(df24_tract_total<span class="sc">$</span>pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="voter-turnout-exploration_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="tracts-with-voter-turnout-over-100" class="level4">
<h4 class="anchored" data-anchor-id="tracts-with-voter-turnout-over-100">Tracts with voter turnout over 100%</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_totalpop_simp <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(pop18_turnout))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 Ã— 4
   planning_geog ballots_cast adult_18plus pop18_turnout
   &lt;chr&gt;                &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;
 1 53053070208           6317         5234          1.21
 2 53035091002           2782         2445          1.14
 3 53053072410           3030         2711          1.12
 4 53061050600            949          911          1.04
 5 53053070314           2168         2100          1.03
 6 53033000500           2514         2463          1.02
 7 53053072405           3177         3148          1.01
 8 53035091001           2708         2684          1.01
 9 53033027702           4051         4018          1.01
10 53061050501           2890         2880          1.00
11 53033009801           2716         2712          1.00</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_above1_totalpop_simp<span class="sc">$</span>pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.001   1.009   1.021   1.054   1.080   1.207 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(df24_tract_above1_totalpop_simp<span class="sc">$</span>pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="voter-turnout-exploration_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="nd-approach" class="level3">
<h3 class="anchored" data-anchor-id="nd-approach">2nd approach</h3>
<section id="all-tracts-3" class="level4">
<h4 class="anchored" data-anchor-id="all-tracts-3">All tracts</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_adult<span class="sc">$</span>pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.05797 0.52459 0.65075 0.64347 0.77801 1.20157       1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(df24_tract_adult<span class="sc">$</span>pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="voter-turnout-exploration_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="tracts-with-voter-turnout-over-100-1" class="level4">
<h4 class="anchored" data-anchor-id="tracts-with-voter-turnout-over-100-1">Tracts with voter turnout over 100%</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_adultpop_simp <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(pop18_turnout))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 Ã— 4
  planning_geog ballots_cast adult_18plus pop18_turnout
  &lt;chr&gt;                &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;
1 53053070208           6289         5234          1.20
2 53035091002           2801         2445          1.15
3 53053072410           3030         2711          1.12
4 53061050600            948          911          1.04
5 53033000500           2496         2463          1.01
6 53033027702           4051         4018          1.01
7 53053072405           3173         3148          1.01
8 53053070314           2114         2100          1.01
9 53061050501           2898         2880          1.01</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_above1_adultpop_simp<span class="sc">$</span>pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.006   1.008   1.013   1.061   1.118   1.202 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(df24_tract_above1_adultpop_simp<span class="sc">$</span>pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="voter-turnout-exploration_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="rd-approach" class="level3">
<h3 class="anchored" data-anchor-id="rd-approach">3rd approach</h3>
<section id="all-tracts-4" class="level4">
<h4 class="anchored" data-anchor-id="all-tracts-4">All tracts</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_adult_dec<span class="sc">$</span>pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.05746 0.52671 0.64939 0.64347 0.77600 1.20329       1 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(df24_tract_adult_dec<span class="sc">$</span>pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="voter-turnout-exploration_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="tracts-with-voter-turnout-over-100-2" class="level4">
<h4 class="anchored" data-anchor-id="tracts-with-voter-turnout-over-100-2">Tracts with voter turnout over 100%</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>df24_tract_above1_adultpop_dec_simp <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(pop18_turnout))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 Ã— 4
   planning_geog ballots_cast adult_18plus pop18_turnout
   &lt;chr&gt;                &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;
 1 53053070208           6298         5234          1.20
 2 53035091002           2789         2445          1.14
 3 53053072410           3030         2711          1.12
 4 53061050600            948          911          1.04
 5 53053070314           2144         2100          1.02
 6 53033000500           2508         2463          1.02
 7 53053072405           3178         3148          1.01
 8 53033027702           4052         4018          1.01
 9 53035091001           2701         2684          1.01
10 53061050501           2897         2880          1.01</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df24_tract_above1_adultpop_dec_simp<span class="sc">$</span>pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.006   1.009   1.020   1.057   1.098   1.203 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(df24_tract_above1_adultpop_dec_simp<span class="sc">$</span>pop18_turnout)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="voter-turnout-exploration_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
</div>
</div>
</div>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>